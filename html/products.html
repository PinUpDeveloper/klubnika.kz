<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Клубника.kz — Товары</title>
  <link rel="stylesheet" href="../css/products.css" />
</head>
<body>
  <header class="site-header">
    <h1>Клубника.kz</h1>
    <p>Свежие ягоды с доставкой по городу</p>
  </header>

  <nav class="site-nav">
    <ul class="nav-list">
      <li><a href="../index.html">Home</a></li>
      <li><a class="active" href="products.html">Products</a></li>
      <li><a href="cart.html">Cart</a></li>
      <li><a href="contact.html">Contact</a></li>
      <li><a href="about.html">About</a></li>
      <li><a href="delivery.html">Delivery</a></li>
    </ul>
  </nav>

  <main class="container">
    <section class="toolbar">
      <h2>Каталог</h2>
      <div class="controls">
        <input class="search" type="search" placeholder="Поиск по товарам…" />
        <select class="sort" aria-label="Сортировка">
          <option value="popular">Сначала популярные</option>
          <option value="price-asc">Цена: по возрастанию</option>
          <option value="price-desc">Цена: по убыванию</option>
        </select>
      </div>
    </section>

    <section class="products-grid">
      <!-- Обязательно: data-title, data-desc, data-price (цена ТОЛЬКО цифры) -->
      <article class="card" data-title="Клубника 500 г" data-desc="Сладкая, ароматная. Подходит для десертов" data-price="1900">
        <img src="https://basket-01.wbbasket.ru/vol135/part13599/13599743/images/big/1.webp" alt="Клубника 500 г" />
        <div class="card-body">
          <h3>Клубника 500 г</h3>
          <p class="desc">Сладкая, ароматная. Подходит для десертов.</p>
          <div class="price-row">
            <span class="price">1 900 ₸</span>
            <a class="btn" href="cart.html">В корзину</a>
          </div>
        </div>
      </article>

      <article class="card" data-title="Клубника 1 кг" data-desc="Фермерская ягода, свежий сбор" data-price="3400">
        <img src="https://ir.ozone.ru/s3/multimedia-1-w/c1000/6936424808.jpg" alt="Клубника 1 кг" />
        <div class="card-body">
          <h3>Клубника 1 кг</h3>
          <p class="desc">Фермерская ягода, свежий сбор.</p>
          <div class="price-row">
            <span class="price">3 400 ₸</span>
            <a class="btn" href="cart.html">В корзину</a>
          </div>
        </div>
      </article>

      <article class="card" data-title="Джем клубничный" data-desc="Натуральный состав, без консервантов" data-price="1200">
        <img src="https://cdn.food.ru/unsigned/fit/640/480/ce/0/czM6Ly9tZWRpYS9waWN0dXJlcy9wcm9kdWN0cy83MTgvY292ZXJzLzRVUHFKbi5qcGc.jpg" alt="Джем клубничный" />
        <div class="card-body">
          <h3>Джем клубничный</h3>
          <p class="desc">Натуральный состав, без консервантов.</p>
          <div class="price-row">
            <span class="price">1 200 ₸</span>
            <a class="btn" href="cart.html">В корзину</a>
          </div>
        </div>
      </article>

      <article class="card" data-title="Микс ягод" data-desc="Клубника, черника, малина — ассорти" data-price="2800">
        <img src="https://fruit-time.ua/images/cache/products/26/yagoda-miks-imp-500x500.jpeg" alt="Микс ягод" />
        <div class="card-body">
          <h3>Микс ягод</h3>
          <p class="desc">Клубника, черника, малина — ассорти.</p>
          <div class="price-row">
            <span class="price">2 800 ₸</span>
            <a class="btn" href="cart.html">В корзину</a>
          </div>
        </div>
      </article>
    </section>
  </main>

  <footer class="site-footer">
    <p>Team Members: Marsel, Armat, Aldiyar</p>
  </footer>

  <!-- Мини-скрипт: поиск + сортировка -->
  <script>
    (function () {
      const search = document.querySelector('.search');
      const sort = document.querySelector('.sort');
      const grid = document.querySelector('.products-grid');
      const originalCards = Array.from(grid.children);

      // запоминаем исходный порядок (для "Сначала популярные")
      originalCards.forEach((card, i) => card.dataset.index = String(i));

      function apply() {
        const q = (search.value || '').trim().toLowerCase();

        // фильтрация по title/desc
        let list = originalCards.filter(card => {
          const hay = ((card.dataset.title || '') + ' ' + (card.dataset.desc || '')).toLowerCase();
          return q === '' || hay.includes(q);
        });

        // сортировка по цене или по исходному порядку
        const mode = (sort.value || 'popular');
        if (mode === 'price-asc' || mode === 'price-desc') {
          list.sort((a, b) => {
            const pa = parseFloat(a.dataset.price || '0');
            const pb = parseFloat(b.dataset.price || '0');
            return (pa - pb) * (mode === 'price-asc' ? 1 : -1);
          });
        } else {
          list.sort((a, b) => (+a.dataset.index) - (+b.dataset.index));
        }

        // перерисовать сетку
        grid.innerHTML = '';
        list.forEach(card => grid.appendChild(card));
      }

      search.addEventListener('input', apply);
      sort.addEventListener('change', apply);
      apply(); // первый прогон
    })();
  </script>
</body>
</html>